<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script src="./js/sessao.js"></script>
  <script src="js/adap_dash_cargo.js"></script>
  <script src="js/dashAdmin.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  

  <link rel="stylesheet" href="./css/menu.css">
  <link rel="stylesheet" href="./css/dashAdmin.css">
  
  <title>NextRail - Equipe</title>
</head>
<body onload="validarSessao(), analisaCargo(), dashAdmin()">
  <!-- Menu lateral -->
  <div class="menu">
    <ul class="link-items">
      <div class="logo-container">
        <img src="./assets/icon/logo-SFroxo.png" alt="Logo NextRail" class="logo-menu">
      </div>

      <li class="link-item">
        <a href="usuarios.html" class="link">
          <ion-icon name="person"></ion-icon>
          <span style="--i: 2">Usuários</span>
        </a>
      </li>

      <li class="link-item">
        <a href="cadastroUsuario.html" class="link">
          <ion-icon name="create"></ion-icon>
          <span style="--i: 1">Cadastro Usuários</span>
        </a>
      </li>

      <li class="link-item active">
        <a href="dashAdmin.html" class="link">
          <ion-icon name="trending-up"></ion-icon>
          <span style="--i: 1">Produtividade</span>
        </a>
      </li>




      <li class="link-item">
        <a onclick="limparSessao()" class="link">
          <ion-icon name="log-out-outline"></ion-icon>
          <span style="--i: 4">Sair</span>
        </a>
      </li>
    </ul>
  </div>

  <!-- Menu hamburger -->
  <div class="hamburger" id="hamburger">
    <span></span>
    <span></span>
    <span></span>
  </div>

  <main class="dashAdmin">
    <div id="loader" class="loader-overlay">
                <div class="loader-spinner"></div>
                <p>Carregando dados...</p>
    </div>
    <h1 id="sub-titulo">
      Equipe de Suporte - Período: 

      <select onchange="dashAdmin()" id="ano_periodo" class="select">
        <option value="2025">2025</option>
        <option value="2024">2024</option>
      </select>
      <select onchange="dashAdmin()" id="mes_periodo" class="select">
        <option value="12">Dezembro</option>
        <option value="11">Novembro</option>
      </select>
    </h1>

    <div class="linha">
      <div class="kpi">
        <div class="titulo">MTTA</div>
        <div id="mtta" class="conteudo">
        </div>
      </div>
      <div class="kpi">
        <div class="titulo">MTTR (Geral)</div>
        <div id="mttr-geral" class="conteudo"></div>
      </div>
      <div class="kpi">
        <div class="titulo">MTBF</div>
        <div id="mtbf" class="conteudo"></div>
      </div>
      <div class="kpi, kpi_sla" id="kpi_sla">
        <div class="titulo">Alertas resolvidos dentro do SLA 
          <select name="" id="alerta-sla" class="select" onchange="mudarCor()">
            <option value="alto">Alto</option>
            <option value="medio">Médio</option>
            <option value="baixo">Baixo</option>
          </select>
        </div>
        <div class="conteudo">
          <div id="kpi_sla_porcentagem"></div>
          <div id="kpi_sla_mttr"></div>
        </div>
      </div>
      <div>
      </div>
    </div>

    <div class="linha">
      <div class="cardGrafico">
        <h2>Tempo de Resolução em relação ao SLA</h2>
          <div class="servidorAlerta">
            <select name="" id="muda-servidor" onchange="mudarServidor()" class="mudaAlerta"></select>
            
            <button id="muda-alerta" onclick="mudarAlerta()" class="mudaAlerta">Alto</button>
          </div>
        <canvas id="tempoSla"></canvas>
      </div>

      <div class="cardGrafico">
        <h2 id="titulo-ticket">Tickets por Suporte</h2>
        <canvas id="ticketsSup"></canvas>
      </div>
    </div>

    <div class="card_legenda">
      <div class="legenda">
        <div class="opcaoLegenda">
          <div class="bloco_cor" style="background-color:yellow"></div>
          <p>Alerta Baixo</p>
        </div>
        <p>|</p>
        <div class="opcaoLegenda">
          <div class="bloco_cor" style="background-color:darkorange"></div>
          <p>Alerta Médio</p>
        </div>
        <p>|</p>
        <div class="opcaoLegenda">
          <div class="bloco_cor" style="background-color:red"></div>
          <p>Alerta Alto</p>
        </div>
        <div class="opcaoLegenda" id="mostrarTodos" onclick="listarServidorTodos()">
      </div>
    </div>
      <div class="descricoes">
        <div class="desc">
          <span>MTTA: </span> Tempo médio para um alerta ser reconhecido.
        </div>
        <div class="desc">
          <span>MTTR:</span> Tempo médio de resolução de um alerta.        
        </div>
        <div class="desc">
          <span>MTBF:</span> Tempo médio entre alertas.
        </div>
        <!-- 
        <div class="desc">
          <ion-icon name="arrow-up-outline" style="color: red; width: 50px;" class="seta"></ion-icon>
          Aumento em relação ao último mês.
        </div>
        <div class="desc">
          <ion-icon name="arrow-down-outline" style="color: green; width: 50px;" class="seta"></ion-icon>
          Redução em relação ao último mês.
        </div>
        -->
      </div>
    </div>

  </main>
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</body>
</html>
